{
  "hash": "812065889362f783a46cef24dc02bbca",
  "result": {
    "engine": "knitr",
    "markdown": "# Results\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\nWe summarize cross-validated training performance of class metrics in the training set. The accuracy, F1-score, and kappa, are the metrics of interest. Workflows are ordered by their mean estimates across the outer folds of the nested CV for each metric.\n\n## Training Set\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n::: {#training-set-results .panel-tabset .nav-pills}\n### Accuracy\n\n\n\n\n\n\n::: {#tbl-train-accuracy .cell tbl-cap='Training Set Mean Accuracy'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & 0.93 & 0.947 & 0.982 & 0.965 & 0.981 & 0.985\\\\\n\\cline{2-8}\n & svm & \\cellcolor[HTML]{90ee90}{0.941} & 0.961 & 0.982 & 0.97 & 0.985 & 0.985\\\\\n\\cline{2-8}\n & xgb & 0.823 & 0.824 & 0.943 & 0.947 & 0.982 & 0.951\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & 0.814 & 0.814 & 0.935 & 0.947 & 0.982 & 0.951\\\\\n\\cline{1-8}\n & rf & 0.829 & 0.861 & 0.976 & 0.945 & 0.909 & 0.968\\\\\n\\cline{2-8}\n & svm & 0.797 & 0.831 & 0.965 & 0.924 & 0.901 & 0.973\\\\\n\\cline{2-8}\n & xgb & 0.206 & 0.32 & 0.583 & 0.947 & 0.79 & 0.773\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.817 & 0.851 & 0.969 & 0.928 & 0.92 & 0.966\\\\\n\\cline{1-8}\n & rf & 0.928 & 0.949 & 0.979 & 0.969 & 0.977 & 0.982\\\\\n\\cline{2-8}\n & svm & 0.932 & 0.959 & 0.973 & 0.963 & \\cellcolor[HTML]{90ee90}{0.986} & 0.982\\\\\n\\cline{2-8}\n & xgb & 0.937 & 0.962 & 0.982 & 0.967 & 0.982 & 0.982\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & 0.889 & 0.92 & 0.974 & 0.95 & 0.961 & 0.972\\\\\n\\cline{1-8}\n & rf & 0.94 & 0.963 & 0.981 & 0.97 & 0.981 & 0.985\\\\\n\\cline{2-8}\n & svm & 0.932 & 0.96 & 0.974 & 0.962 & \\cellcolor[HTML]{90ee90}{0.986} & 0.982\\\\\n\\cline{2-8}\n & xgb & 0.934 & 0.957 & 0.981 & 0.967 & 0.982 & 0.981\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.885 & 0.914 & 0.974 & 0.956 & 0.947 & 0.979\\\\\n\\cline{1-8}\n & rf & 0.932 & 0.957 & 0.979 & 0.969 & 0.981 & 0.978\\\\\n\\cline{2-8}\n & svm & 0.92 & 0.948 & 0.973 & 0.957 & 0.981 & 0.982\\\\\n\\cline{2-8}\n & xgb & 0.928 & 0.953 & 0.978 & 0.966 & 0.978 & 0.98\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.885 & 0.913 & 0.978 & 0.954 & 0.949 & 0.976\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean Accuracy](results_files/figure-pdf/fig-train-accuracy-1.pdf){#fig-train-accuracy}\n:::\n:::\n\n\n\n\n\n\n### Sensitivity\n\n\n\n\n\n\n::: {#tbl-train-sens .cell tbl-cap='Training Set Mean Sensitivity'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & 0.666 & 0.991 & 0.797 & 0.585 & 0.133 & 0.822\\\\\n\\cline{2-8}\n & svm & 0.713 & 0.993 & 0.802 & 0.695 & 0.264 & 0.81\\\\\n\\cline{2-8}\n & xgb & 0.241 & \\cellcolor[HTML]{90ee90}{1} & 0.203 & 0 & 0 & 0\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & 0.2 & \\cellcolor[HTML]{90ee90}{1} & 0 & 0 & 0 & 0\\\\\n\\cline{1-8}\n & rf & 0.805 & 0.838 & 0.816 & 0.684 & 0.865 & 0.824\\\\\n\\cline{2-8}\n & svm & 0.814 & 0.8 & 0.743 & 0.777 & 0.971 & 0.781\\\\\n\\cline{2-8}\n & xgb & 0.2 & 0.2 & 0.4 & 0 & 0.2 & 0.2\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.79 & 0.826 & 0.772 & 0.683 & 0.865 & 0.804\\\\\n\\cline{1-8}\n & rf & 0.695 & 0.981 & 0.805 & 0.636 & 0.28 & 0.77\\\\\n\\cline{2-8}\n & svm & 0.725 & 0.989 & 0.748 & 0.617 & 0.528 & 0.744\\\\\n\\cline{2-8}\n & xgb & 0.75 & 0.98 & 0.805 & 0.715 & 0.397 & 0.854\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & \\cellcolor[HTML]{90ee90}{0.834} & 0.91 & 0.789 & 0.766 & 0.871 & 0.833\\\\\n\\cline{1-8}\n & rf & 0.755 & 0.984 & 0.805 & 0.762 & 0.38 & 0.841\\\\\n\\cline{2-8}\n & svm & 0.738 & 0.988 & 0.748 & 0.661 & 0.534 & 0.76\\\\\n\\cline{2-8}\n & xgb & 0.796 & 0.965 & 0.84 & 0.738 & 0.596 & 0.839\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.806 & 0.905 & 0.792 & 0.79 & 0.703 & 0.839\\\\\n\\cline{1-8}\n & rf & 0.775 & 0.97 & 0.801 & 0.777 & 0.47 & 0.855\\\\\n\\cline{2-8}\n & svm & 0.811 & 0.957 & 0.783 & 0.764 & 0.763 & 0.788\\\\\n\\cline{2-8}\n & xgb & 0.792 & 0.96 & 0.825 & 0.727 & 0.594 & 0.854\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.821 & 0.903 & 0.812 & 0.782 & 0.77 & 0.839\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean Sensitivity](results_files/figure-pdf/fig-train-sens-1.pdf){#fig-train-sens}\n:::\n:::\n\n\n\n\n\n\n### Specificity\n\n\n\n\n\n\n::: {#tbl-train-spec .cell tbl-cap='Training Set Mean Specificity'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & 0.947 & 0.761 & 0.995 & 0.988 & 0.998 & 0.993\\\\\n\\cline{2-8}\n & svm & 0.959 & 0.821 & 0.995 & 0.986 & 0.998 & 0.994\\\\\n\\cline{2-8}\n & xgb & 0.811 & 0.055 & 0.999 & \\cellcolor[HTML]{90ee90}{1} & \\cellcolor[HTML]{90ee90}{1} & \\cellcolor[HTML]{90ee90}{1}\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & 0.8 & 0 & \\cellcolor[HTML]{90ee90}{1} & \\cellcolor[HTML]{90ee90}{1} & \\cellcolor[HTML]{90ee90}{1} & \\cellcolor[HTML]{90ee90}{1}\\\\\n\\cline{1-8}\n & rf & 0.958 & 0.961 & 0.987 & 0.958 & 0.91 & 0.975\\\\\n\\cline{2-8}\n & svm & 0.952 & 0.963 & 0.98 & 0.933 & 0.9 & 0.984\\\\\n\\cline{2-8}\n & xgb & 0.8 & 0.8 & 0.6 & \\cellcolor[HTML]{90ee90}{1} & 0.8 & 0.8\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.955 & 0.959 & 0.983 & 0.94 & 0.92 & 0.975\\\\\n\\cline{1-8}\n & rf & 0.953 & 0.803 & 0.991 & 0.987 & 0.991 & 0.992\\\\\n\\cline{2-8}\n & svm & 0.959 & 0.833 & 0.99 & 0.984 & 0.993 & 0.995\\\\\n\\cline{2-8}\n & xgb & 0.968 & 0.881 & 0.995 & 0.981 & 0.993 & 0.988\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & 0.971 & 0.964 & 0.987 & 0.962 & 0.963 & 0.979\\\\\n\\cline{1-8}\n & rf & 0.966 & 0.866 & 0.993 & 0.983 & 0.993 & 0.992\\\\\n\\cline{2-8}\n & svm & 0.96 & 0.841 & 0.991 & 0.982 & 0.994 & 0.994\\\\\n\\cline{2-8}\n & xgb & \\cellcolor[HTML]{90ee90}{0.974} & 0.923 & 0.991 & 0.979 & 0.989 & 0.988\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.968 & 0.95 & 0.987 & 0.965 & 0.951 & 0.986\\\\\n\\cline{1-8}\n & rf & 0.97 & 0.903 & 0.991 & 0.981 & 0.991 & 0.985\\\\\n\\cline{2-8}\n & svm & 0.969 & 0.91 & 0.986 & 0.97 & 0.985 & 0.992\\\\\n\\cline{2-8}\n & xgb & 0.971 & 0.916 & 0.989 & 0.979 & 0.985 & 0.987\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.968 & 0.954 & 0.99 & 0.964 & 0.952 & 0.983\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean Specificity](results_files/figure-pdf/fig-train-spec-1.pdf){#fig-train-spec}\n:::\n:::\n\n\n\n\n\n\n### F1-Score\n\n\n\n\n\n\n::: {#tbl-train-f1 .cell tbl-cap='Training Set Mean F1-Score'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & \\cellcolor[HTML]{FFD700}{0.751} & \\cellcolor[HTML]{FFD700}{0.968} & \\cellcolor[HTML]{FFD700}{0.849} & \\cellcolor[HTML]{FFD700}{0.622} & \\cellcolor[HTML]{FFD700}{0.262} & \\cellcolor[HTML]{FFD700}{0.838}\\\\\n\\cline{2-8}\n & svm & \\cellcolor[HTML]{FFD700}{0.775} & \\cellcolor[HTML]{FFD700}{0.976} & \\cellcolor[HTML]{FFD700}{0.852} & \\cellcolor[HTML]{FFD700}{0.695} & \\cellcolor[HTML]{FFD700}{0.433} & \\cellcolor[HTML]{FFD700}{0.837}\\\\\n\\cline{2-8}\n & xgb & \\cellcolor[HTML]{FF0000}{0.841} & \\cellcolor[HTML]{FF0000}{0.902} & \\cellcolor[HTML]{FF0000}{0.611} & \\cellcolor[HTML]{FF0000}{NaN} & \\cellcolor[HTML]{FF0000}{NaN} & \\cellcolor[HTML]{FF0000}{NaN}\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & \\cellcolor[HTML]{FF0000}{0.897} & \\cellcolor[HTML]{FF0000}{0.897} & \\cellcolor[HTML]{FF0000}{NaN} & \\cellcolor[HTML]{FF0000}{NaN} & \\cellcolor[HTML]{FF0000}{NaN} & \\cellcolor[HTML]{FF0000}{NaN}\\\\\n\\cline{1-8}\n & rf & 0.648 & 0.907 & 0.813 & 0.545 & 0.255 & 0.719\\\\\n\\cline{2-8}\n & svm & 0.623 & 0.884 & 0.728 & 0.486 & 0.275 & 0.744\\\\\n\\cline{2-8}\n & xgb & \\cellcolor[HTML]{FF0000}{0.257} & \\cellcolor[HTML]{FF0000}{0.91} & \\cellcolor[HTML]{FF0000}{0.114} & \\cellcolor[HTML]{FF0000}{NaN} & \\cellcolor[HTML]{FF0000}{0.04} & \\cellcolor[HTML]{FF0000}{0.106}\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.622 & 0.9 & 0.76 & 0.474 & 0.273 & 0.704\\\\\n\\cline{1-8}\n & rf & 0.707 & 0.969 & 0.829 & 0.657 & 0.278 & 0.803\\\\\n\\cline{2-8}\n & svm & 0.741 & 0.975 & 0.776 & 0.612 & 0.54 & 0.802\\\\\n\\cline{2-8}\n & xgb & 0.747 & 0.977 & 0.855 & 0.678 & 0.408 & 0.817\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & 0.706 & 0.949 & 0.804 & 0.587 & 0.448 & 0.742\\\\\n\\cline{1-8}\n & rf & 0.748 & \\cellcolor[HTML]{90ee90}{0.978} & 0.837 & 0.716 & 0.37 & 0.84\\\\\n\\cline{2-8}\n & svm & 0.751 & 0.975 & 0.783 & 0.626 & 0.566 & 0.805\\\\\n\\cline{2-8}\n & xgb & \\cellcolor[HTML]{90ee90}{0.763} & 0.973 & 0.845 & 0.663 & 0.528 & 0.806\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.7 & 0.945 & 0.797 & 0.631 & 0.334 & 0.793\\\\\n\\cline{1-8}\n & rf & 0.748 & 0.974 & 0.828 & 0.698 & 0.448 & 0.791\\\\\n\\cline{2-8}\n & svm & 0.751 & 0.967 & 0.785 & 0.622 & 0.569 & 0.81\\\\\n\\cline{2-8}\n & xgb & 0.753 & 0.97 & 0.829 & 0.678 & 0.484 & 0.803\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.708 & 0.944 & 0.829 & 0.628 & 0.367 & 0.769\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean F1-Score](results_files/figure-pdf/fig-train-f1-1.pdf){#fig-train-f1}\n:::\n:::\n\n\n\n\n\n\n### Balanced Accuracy\n\n\n\n\n\n\n::: {#tbl-train-bal-accuracy .cell tbl-cap='Training Set Mean Balanced Accuracy'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & 0.806 & 0.876 & 0.896 & 0.786 & 0.566 & 0.908\\\\\n\\cline{2-8}\n & svm & 0.836 & 0.907 & 0.898 & 0.841 & 0.631 & 0.902\\\\\n\\cline{2-8}\n & xgb & 0.526 & 0.528 & 0.601 & 0.5 & 0.5 & 0.5\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & 0.5 & 0.5 & 0.5 & 0.5 & 0.5 & 0.5\\\\\n\\cline{1-8}\n & rf & 0.882 & 0.899 & 0.902 & 0.821 & 0.887 & 0.9\\\\\n\\cline{2-8}\n & svm & 0.883 & 0.882 & 0.862 & 0.855 & 0.936 & 0.882\\\\\n\\cline{2-8}\n & xgb & 0.5 & 0.5 & 0.5 & 0.5 & 0.5 & 0.5\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.873 & 0.892 & 0.878 & 0.812 & 0.893 & 0.889\\\\\n\\cline{1-8}\n & rf & 0.824 & 0.892 & 0.898 & 0.812 & 0.636 & 0.881\\\\\n\\cline{2-8}\n & svm & 0.842 & 0.911 & 0.869 & 0.801 & 0.761 & 0.87\\\\\n\\cline{2-8}\n & xgb & 0.859 & 0.931 & 0.9 & 0.848 & 0.695 & 0.921\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & \\cellcolor[HTML]{90ee90}{0.903} & 0.937 & 0.888 & 0.864 & 0.917 & 0.906\\\\\n\\cline{1-8}\n & rf & 0.86 & 0.925 & 0.899 & 0.872 & 0.687 & 0.917\\\\\n\\cline{2-8}\n & svm & 0.849 & 0.915 & 0.869 & 0.822 & 0.764 & 0.877\\\\\n\\cline{2-8}\n & xgb & 0.885 & \\cellcolor[HTML]{90ee90}{0.944} & 0.915 & 0.858 & 0.792 & 0.914\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.887 & 0.927 & 0.889 & 0.877 & 0.827 & 0.913\\\\\n\\cline{1-8}\n & rf & 0.872 & 0.937 & 0.896 & 0.879 & 0.731 & 0.92\\\\\n\\cline{2-8}\n & svm & 0.89 & 0.933 & 0.885 & 0.867 & 0.874 & 0.89\\\\\n\\cline{2-8}\n & xgb & 0.882 & 0.938 & 0.907 & 0.853 & 0.79 & 0.92\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.895 & 0.928 & 0.901 & 0.873 & 0.861 & 0.911\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean Balanced Accuracy](results_files/figure-pdf/fig-train-bal-accuracy-1.pdf){#fig-train-bal-accuracy}\n:::\n:::\n\n\n\n\n\n\n### Kappa\n\n\n\n\n\n\n::: {#tbl-train-kappa .cell tbl-cap='Training Set Mean Kappa'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & 0.767 & 0.811 & 0.84 & 0.604 & 0.154 & 0.83\\\\\n\\cline{2-8}\n & svm & \\cellcolor[HTML]{90ee90}{0.808} & 0.862 & 0.843 & 0.679 & 0.342 & 0.829\\\\\n\\cline{2-8}\n & xgb & 0.084 & 0.083 & 0.24 & 0 & 0 & 0\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & 0 & 0 & 0 & 0 & 0 & 0\\\\\n\\cline{1-8}\n & rf & 0.597 & 0.633 & 0.8 & 0.517 & 0.232 & 0.702\\\\\n\\cline{2-8}\n & svm & 0.547 & 0.577 & 0.709 & 0.452 & 0.252 & 0.73\\\\\n\\cline{2-8}\n & xgb & 0 & 0 & 0 & 0 & 0 & 0\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.574 & 0.613 & 0.744 & 0.439 & 0.251 & 0.687\\\\\n\\cline{1-8}\n & rf & 0.764 & 0.819 & 0.818 & 0.641 & 0.269 & 0.793\\\\\n\\cline{2-8}\n & svm & 0.779 & 0.859 & 0.762 & 0.593 & 0.533 & 0.793\\\\\n\\cline{2-8}\n & xgb & 0.804 & \\cellcolor[HTML]{90ee90}{0.871} & 0.845 & 0.66 & 0.399 & 0.807\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & 0.706 & 0.766 & 0.79 & 0.562 & 0.434 & 0.728\\\\\n\\cline{1-8}\n & rf & 0.806 & 0.87 & 0.827 & 0.7 & 0.363 & 0.832\\\\\n\\cline{2-8}\n & svm & 0.783 & 0.862 & 0.77 & 0.606 & 0.56 & 0.796\\\\\n\\cline{2-8}\n & xgb & 0.803 & 0.862 & 0.835 & 0.646 & 0.519 & 0.796\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.695 & 0.747 & 0.783 & 0.608 & 0.316 & 0.782\\\\\n\\cline{1-8}\n & rf & 0.793 & 0.858 & 0.817 & 0.682 & 0.439 & 0.78\\\\\n\\cline{2-8}\n & svm & 0.765 & 0.831 & 0.77 & 0.601 & 0.56 & 0.801\\\\\n\\cline{2-8}\n & xgb & 0.786 & 0.846 & 0.817 & 0.661 & 0.475 & 0.793\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.696 & 0.745 & 0.818 & 0.604 & 0.349 & 0.757\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean Kappa](results_files/figure-pdf/fig-train-kappa-1.pdf){#fig-train-kappa}\n:::\n:::\n\n\n\n\n\n\n### G-mean\n\n**DEPRECATED**\n\n\n\n\n\n\n::: {#tbl-train-gmean .cell tbl-cap='Training Set Mean G-mean'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|>{}l||l|l|l|l|l}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nSubsampling & Algorithms & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & rf & 0.261 & 0.868 & 0.89 & 0.755 & 0.223 & 0.903\\\\\n\\cline{2-8}\n & svm & 0.54 & 0.903 & 0.893 & 0.827 & 0.453 & 0.897\\\\\n\\cline{2-8}\n & xgb & 0 & 0.146 & 0.271 & 0 & 0 & 0\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash none} & mr & 0 & 0 & 0 & 0 & 0 & 0\\\\\n\\cline{1-8}\n & rf & 0.798 & 0.897 & 0.897 & 0.806 & 0.884 & 0.895\\\\\n\\cline{2-8}\n & svm & 0.809 & 0.878 & 0.853 & 0.85 & 0.934 & 0.875\\\\\n\\cline{2-8}\n & xgb & 0 & 0 & 0 & 0 & 0 & 0\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash down} & mr & 0.782 & 0.89 & 0.871 & 0.796 & 0.889 & 0.884\\\\\n\\cline{1-8}\n & rf & 0.421 & 0.887 & 0.893 & 0.789 & 0.403 & 0.874\\\\\n\\cline{2-8}\n & svm & 0.699 & 0.907 & 0.859 & 0.775 & 0.715 & 0.859\\\\\n\\cline{2-8}\n & xgb & 0.706 & 0.929 & 0.894 & 0.836 & 0.614 & 0.918\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash up} & mr & \\cellcolor[HTML]{90ee90}{0.829} & 0.936 & 0.882 & 0.858 & 0.913 & 0.903\\\\\n\\cline{1-8}\n & rf & 0.607 & 0.923 & 0.894 & 0.864 & 0.545 & 0.913\\\\\n\\cline{2-8}\n & svm & 0.714 & 0.911 & 0.859 & 0.799 & 0.724 & 0.867\\\\\n\\cline{2-8}\n & xgb & 0.778 & \\cellcolor[HTML]{90ee90}{0.944} & 0.912 & 0.849 & 0.759 & 0.91\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash smote} & mr & 0.801 & 0.927 & 0.884 & 0.872 & 0.814 & 0.909\\\\\n\\cline{1-8}\n & rf & 0.749 & 0.936 & 0.891 & 0.872 & 0.676 & 0.917\\\\\n\\cline{2-8}\n & svm & 0.804 & 0.933 & 0.878 & 0.859 & 0.863 & 0.884\\\\\n\\cline{2-8}\n & xgb & 0.778 & 0.938 & 0.903 & 0.842 & 0.759 & 0.918\\\\\n\\cline{2-8}\n\\multirow{-4}{*}{\\raggedright\\arraybackslash hybrid} & mr & 0.816 & 0.928 & 0.896 & 0.868 & 0.851 & 0.907\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Training Set Mean G-mean](results_files/figure-pdf/fig-train-gmean-1.pdf){#fig-train-gmean}\n:::\n:::\n\n\n\n\n\n:::\n\n## Rank Aggregation\n\nMulti-step methods:\n\n-   **sequential**: sequential algorithm sequence of subsampling methods and algorithms used are:\n    -   HGSC vs. non-HGSC using SMOTE subsampling and random forest\n    -   CCOC vs. non-CCOC using hybrid subsampling and XGBoost\n    -   ENOC vs. non-ENOC using upsampling and support vector machine\n    -   LGSC vs. MUC using hybrid subsampling and regularized multinomial regression\n-   **two_step**: two-step algorithm sequence of subsampling methods and algorithms used are:\n    -   HGSC vs. non-HGSC using SMOTE subsampling and random forest\n    -   CCOC vs. ENOC vs. MUC vs. LGSC using hybrid subsampling and support vector machine\n\nWe conduct rank aggregation using a two-stage nested appraoch:\n\n1.  First we rank aggregate the per-class metrics for F1-score, balanced accuracy and kappa.\n2.  Then we take the aggregated lists from the three metrics and perform a final rank aggregation.\n3.  The top workflows from the final rank aggregation are used for gene optimization in the confirmation set\n\n### Across Classes\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n::: {#rank-agg-metrics .panel-tabset .nav-pills}\n#### F1-Score\n\n\n\n\n\n\n::: {#tbl-rank-agg-f1 .cell tbl-cap='F1-Score Rank Aggregation Summary'}\n::: {.cell-output-display}\n![](results_files/figure-pdf/tbl-rank-agg-f1-1.pdf)\n:::\n:::\n\n\n\n\n\n\n#### Balanced Accuracy\n\n\n\n\n\n\n::: {#tbl-rank-agg-bal-acc .cell tbl-cap='Balanced Accuracy Rank Aggregation Summary'}\n::: {.cell-output-display}\n![](results_files/figure-pdf/tbl-rank-agg-bal-acc-1.pdf)\n:::\n:::\n\n\n\n\n\n\n#### Kappa\n\n\n\n\n\n\n::: {#tbl-rank-agg-kap .cell tbl-cap='Kappa Rank Aggregation Summary'}\n::: {.cell-output-display}\n![](results_files/figure-pdf/tbl-rank-agg-kap-1.pdf)\n:::\n:::\n\n\n\n\n\n:::\n\n### Across Metrics\n\n\n\n\n\n\n::: {#tbl-rank-agg-comp-metrics .cell tbl-cap='Rank Aggregation Comparison of Metrics Used'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{r|l|l|l}\n\\hline\nRank & F1 & Balanced Accuracy & Kappa\\\\\n\\hline\n1 & sequential & sequential & sequential\\\\\n\\hline\n2 & two\\_step & hybrid\\_xgb & smote\\_rf\\\\\n\\hline\n3 & smote\\_rf & smote\\_xgb & up\\_xgb\\\\\n\\hline\n4 & none\\_svm & hybrid\\_rf & none\\_svm\\\\\n\\hline\n5 & up\\_xgb & smote\\_rf & two\\_step\\\\\n\\hline\n6 & smote\\_xgb & up\\_xgb & smote\\_xgb\\\\\n\\hline\n7 & hybrid\\_xgb & up\\_mr & hybrid\\_rf\\\\\n\\hline\n8 & smote\\_svm & hybrid\\_mr & hybrid\\_xgb\\\\\n\\hline\n9 & hybrid\\_rf & smote\\_mr & smote\\_svm\\\\\n\\hline\n10 & up\\_rf & two\\_step & up\\_svm\\\\\n\\hline\n11 & up\\_svm & hybrid\\_svm & hybrid\\_svm\\\\\n\\hline\n12 & hybrid\\_mr & none\\_svm & up\\_rf\\\\\n\\hline\n13 & hybrid\\_svm & smote\\_svm & none\\_rf\\\\\n\\hline\n14 & none\\_rf & down\\_rf & hybrid\\_mr\\\\\n\\hline\n15 & smote\\_mr & down\\_mr & smote\\_mr\\\\\n\\hline\n16 & up\\_mr & down\\_svm & up\\_mr\\\\\n\\hline\n17 & down\\_rf & up\\_rf & down\\_rf\\\\\n\\hline\n18 & down\\_mr & up\\_svm & down\\_mr\\\\\n\\hline\n19 & down\\_svm & none\\_rf & down\\_svm\\\\\n\\hline\n20 & NA & down\\_xgb & down\\_xgb\\\\\n\\hline\n21 & NA & none\\_mr & none\\_mr\\\\\n\\hline\n22 & NA & none\\_xgb & none\\_xgb\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {#tbl-rank-agg-final .cell tbl-cap='Top 5 Workflows from Final Rank Aggregation'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{r|l}\n\\hline\nRank & Workflow\\\\\n\\hline\n1 & sequential\\\\\n\\hline\n2 & smote\\_rf\\\\\n\\hline\n3 & two\\_step\\\\\n\\hline\n4 & none\\_svm\\\\\n\\hline\n5 & up\\_xgb\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n\n\n\n\n\n### Top Workflows\n\nWe look at the per-class evaluation metrics of the top 5 workflows.\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Top 5 Workflow Per-Class Evaluation Metrics by Metric](results_files/figure-pdf/fig-metrics-top-by-metric-1.pdf){#fig-metrics-top-by-metric width=100%}\n:::\n:::\n\n\n\n\n\n\nMisclassified cases from a previous step of the sequence of classifiers are not included in subsequent steps of the training set CV folds. Thus, we cannot piece together the test set predictions from the sequential and two-step algorithms to obtain overall metrics.\n\n## Optimal Gene Sets\n\n### Sequential Algorithm\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Gene Optimization for Sequential Classifier](results_files/figure-pdf/fig-gene-seq-1.pdf){#fig-gene-seq}\n:::\n:::\n\n\n\n\n\n\nIn the sequential algorithm, sequences 1, 2, and 4 have relatively flat average F1-scores across the number of genes added. However, we can observe in sequence 3, the F1-score stabilizes at around 0.88 when we reach 7 genes added, hence the optimal number of genes used will be n=28+7=35 The added genes are: CYP2C18, TFF3, TP53, HNF1B, WT1, MAP1LC3A and SLC3A1.\n\n\n\n\n\n\n::: {#tbl-gene-opt-seq .cell tbl-cap='Gene Profile of Optimal Set in Sequential Algorithm'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|l|l|l|l}\n\\hline\nSet & Genes & PrOTYPE & SPOT & Optimal Set & Candidate Rank\\\\\n\\hline\n & COL11A1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CD74 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CD2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & TIMP3 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & LUM & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CYTIP & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & COL3A1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & THBS2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & TCF7L1 & v & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & HMGA2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & FN1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & POSTN & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & COL1A2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & COL5A2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & PDZK1IP1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & FBN1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & HIF1A &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CXCL10 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & DUSP4 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & SOX17 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & MITF &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CDKN3 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & BRCA2 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CEACAM5 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & ANXA4 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & SERPINE1 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CRABP2 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n\\multirow{-28}{*}{\\raggedright\\arraybackslash Base} & DNAJC9 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{1-6}\n & CYP2C18 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 1\\\\\n\\cline{2-6}\n & TFF3 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 2\\\\\n\\cline{2-6}\n & TP53 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 3\\\\\n\\cline{2-6}\n & HNF1B &  &  & \\textcolor[HTML]{8B8000}{(*)} & 4\\\\\n\\cline{2-6}\n & WT1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 5\\\\\n\\cline{2-6}\n & MAP1LC3A &  &  & \\textcolor[HTML]{8B8000}{(*)} & 6\\\\\n\\cline{2-6}\n & SLC3A1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 7\\\\\n\\cline{2-6}\n & EPAS1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 8\\\\\n\\cline{2-6}\n & EGFL6 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 9\\\\\n\\cline{2-6}\n & IL6 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 10\\\\\n\\cline{2-6}\n & TFF1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 11\\\\\n\\cline{2-6}\n & BRCA1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 12\\\\\n\\cline{2-6}\n & IGFBP1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 13\\\\\n\\cline{2-6}\n & ATP5G3 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 14\\\\\n\\cline{2-6}\n & MUC5B &  &  & \\textcolor[HTML]{FF0000}{(*)} & 15\\\\\n\\cline{2-6}\n & SEMA6A &  &  & \\textcolor[HTML]{FF0000}{(*)} & 16\\\\\n\\cline{2-6}\n & FUT3 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 17\\\\\n\\cline{2-6}\n & MET &  &  & \\textcolor[HTML]{FF0000}{(*)} & 18\\\\\n\\cline{2-6}\n & GPR64 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 19\\\\\n\\cline{2-6}\n & ZBED1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 20\\\\\n\\cline{2-6}\n & CPNE8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 21\\\\\n\\cline{2-6}\n & SCGB1D2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 22\\\\\n\\cline{2-6}\n & PAX8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 23\\\\\n\\cline{2-6}\n & KLK7 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 24\\\\\n\\cline{2-6}\n & STC1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 25\\\\\n\\cline{2-6}\n & CAPN2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 26\\\\\n\\cline{2-6}\n & TPX2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 27\\\\\n\\cline{2-6}\n & GAD1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 28\\\\\n\\cline{2-6}\n & DKK4 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 29\\\\\n\\cline{2-6}\n & GCNT3 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 30\\\\\n\\cline{2-6}\n & CYP4B1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 31\\\\\n\\cline{2-6}\n & LGALS4 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 32\\\\\n\\cline{2-6}\n & C1orf173 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 33\\\\\n\\cline{2-6}\n & C10orf116 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 34\\\\\n\\cline{2-6}\n & PBX1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 35\\\\\n\\cline{2-6}\n & KGFLP2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 36\\\\\n\\cline{2-6}\n & SENP8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 37\\\\\n\\cline{2-6}\n & BCL2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 38\\\\\n\\cline{2-6}\n & ADCYAP1R1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 39\\\\\n\\cline{2-6}\n & TSPAN8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 40\\\\\n\\cline{2-6}\n & LIN28B &  &  & \\textcolor[HTML]{FF0000}{(*)} & 41\\\\\n\\cline{2-6}\n & SERPINA5 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 42\\\\\n\\cline{2-6}\n & IGJ &  &  & \\textcolor[HTML]{FF0000}{(*)} & 43\\\\\n\\cline{2-6}\n\\multirow{-44}{*}{\\raggedright\\arraybackslash Candidates} & IGKC &  &  & \\textcolor[HTML]{FF0000}{(*)} & 44\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n\n\n\n\n\n### SMOTE-Random Forest\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Gene Optimization for SMOTE-Random Forest Classifier](results_files/figure-pdf/fig-gene-smote-rf-1.pdf){#fig-gene-smote-rf}\n:::\n:::\n\n\n\n\n\n\nIn the SMOTE-Random Forest classifier, the F1-score stabilizes at around 0.7 when we reach 18 genes added, hence the optimal number of genes used will be n=28+18=46 The added genes are: TFF1, HNF1B, TFF3, LGALS4, SLC3A1, WT1, KLK7, TPX2, CYP2C18, GAD1, IGFBP1, CAPN2, FUT3, DKK4, C1orf173, GCNT3, C10orf116 and MUC5B.\n\n\n\n\n\n\n::: {#tbl-gene-opt-smote-rf .cell tbl-cap='Gene Profile of Optimal Set in SMOTE-Random Forest Workflow'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|l|l|l|l}\n\\hline\nSet & Genes & PrOTYPE & SPOT & Optimal Set & Candidate Rank\\\\\n\\hline\n & COL11A1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CD74 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CD2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & TIMP3 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & LUM & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CYTIP & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & COL3A1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & THBS2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & TCF7L1 & v & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & HMGA2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & FN1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & POSTN & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & COL1A2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & COL5A2 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & PDZK1IP1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & FBN1 & v &  & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & HIF1A &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CXCL10 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & DUSP4 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & SOX17 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & MITF &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CDKN3 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & BRCA2 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CEACAM5 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & ANXA4 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & SERPINE1 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n & CRABP2 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{2-6}\n\\multirow{-28}{*}{\\raggedright\\arraybackslash Base} & DNAJC9 &  & v & \\textcolor{green}{(*)} & \\\\\n\\cline{1-6}\n & TFF1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 1\\\\\n\\cline{2-6}\n & HNF1B &  &  & \\textcolor[HTML]{8B8000}{(*)} & 2\\\\\n\\cline{2-6}\n & TFF3 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 3\\\\\n\\cline{2-6}\n & LGALS4 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 4\\\\\n\\cline{2-6}\n & SLC3A1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 5\\\\\n\\cline{2-6}\n & WT1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 6\\\\\n\\cline{2-6}\n & KLK7 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 7\\\\\n\\cline{2-6}\n & TPX2 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 8\\\\\n\\cline{2-6}\n & CYP2C18 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 9\\\\\n\\cline{2-6}\n & GAD1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 10\\\\\n\\cline{2-6}\n & IGFBP1 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 11\\\\\n\\cline{2-6}\n & CAPN2 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 12\\\\\n\\cline{2-6}\n & FUT3 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 13\\\\\n\\cline{2-6}\n & DKK4 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 14\\\\\n\\cline{2-6}\n & C1orf173 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 15\\\\\n\\cline{2-6}\n & GCNT3 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 16\\\\\n\\cline{2-6}\n & C10orf116 &  &  & \\textcolor[HTML]{8B8000}{(*)} & 17\\\\\n\\cline{2-6}\n & MUC5B &  &  & \\textcolor[HTML]{8B8000}{(*)} & 18\\\\\n\\cline{2-6}\n & ATP5G3 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 19\\\\\n\\cline{2-6}\n & PAX8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 20\\\\\n\\cline{2-6}\n & IL6 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 21\\\\\n\\cline{2-6}\n & GPR64 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 22\\\\\n\\cline{2-6}\n & CPNE8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 23\\\\\n\\cline{2-6}\n & PBX1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 24\\\\\n\\cline{2-6}\n & STC1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 25\\\\\n\\cline{2-6}\n & MET &  &  & \\textcolor[HTML]{FF0000}{(*)} & 26\\\\\n\\cline{2-6}\n & IGKC &  &  & \\textcolor[HTML]{FF0000}{(*)} & 27\\\\\n\\cline{2-6}\n & EPAS1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 28\\\\\n\\cline{2-6}\n & TSPAN8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 29\\\\\n\\cline{2-6}\n & SEMA6A &  &  & \\textcolor[HTML]{FF0000}{(*)} & 30\\\\\n\\cline{2-6}\n & EGFL6 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 31\\\\\n\\cline{2-6}\n & TP53 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 32\\\\\n\\cline{2-6}\n & CYP4B1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 33\\\\\n\\cline{2-6}\n & KGFLP2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 34\\\\\n\\cline{2-6}\n & BRCA1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 35\\\\\n\\cline{2-6}\n & LIN28B &  &  & \\textcolor[HTML]{FF0000}{(*)} & 36\\\\\n\\cline{2-6}\n & SERPINA5 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 37\\\\\n\\cline{2-6}\n & BCL2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 38\\\\\n\\cline{2-6}\n & SCGB1D2 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 39\\\\\n\\cline{2-6}\n & ZBED1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 40\\\\\n\\cline{2-6}\n & SENP8 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 41\\\\\n\\cline{2-6}\n & ADCYAP1R1 &  &  & \\textcolor[HTML]{FF0000}{(*)} & 42\\\\\n\\cline{2-6}\n & MAP1LC3A &  &  & \\textcolor[HTML]{FF0000}{(*)} & 43\\\\\n\\cline{2-6}\n\\multirow{-44}{*}{\\raggedright\\arraybackslash Candidates} & IGJ &  &  & \\textcolor[HTML]{FF0000}{(*)} & 44\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n\n\n\n\n\n## Test Set Performance\n\nNow we'd like to see how our best methods perform in the confirmation and validation sets. The class-specific F1-scores will be used.\n\nThe top 2 methods are the sequential and SMOTE-Random Forest classifiers. We can test 2 additional methods by using either the full set of genes or the optimal set of genes for both of these classifiers.\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n### Confirmation Set\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {#tbl-conf-eval .cell tbl-cap='Evaluation Metrics on Confirmation Set Models'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|l|r|r|r|r|r|r}\n\\hline\n\\multicolumn{3}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{4-8}\nMethod & Metric & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\n & Accuracy & 0.834 & 0.869 & 0.960 & 0.894 & 0.977 & 0.967\\\\\n\\cline{2-8}\n & Sensitivity & 0.655 & 0.948 & 0.853 & 0.462 & 0.308 & 0.704\\\\\n\\cline{2-8}\n & Specificity & 0.928 & 0.719 & 0.974 & 0.980 & 0.990 & 0.979\\\\\n\\cline{2-8}\n & F1-Score & 0.664 & 0.905 & 0.831 & 0.590 & 0.348 & 0.644\\\\\n\\cline{2-8}\n & Balanced Accuracy & 0.792 & 0.834 & 0.913 & 0.721 & 0.649 & 0.841\\\\\n\\cline{2-8}\n\\multirow{-6}{*}{\\raggedright\\arraybackslash Sequential, Full Set} & Kappa & 0.665 & 0.697 & 0.808 & 0.535 & 0.336 & 0.627\\\\\n\\cline{1-8}\n & Accuracy & 0.821 & 0.865 & 0.949 & 0.879 & 0.983 & 0.967\\\\\n\\cline{2-8}\n & Sensitivity & 0.633 & 0.953 & 0.840 & 0.396 & 0.385 & 0.593\\\\\n\\cline{2-8}\n & Specificity & 0.923 & 0.697 & 0.963 & 0.974 & 0.995 & 0.984\\\\\n\\cline{2-8}\n & F1-Score & 0.659 & 0.902 & 0.792 & 0.519 & 0.476 & 0.604\\\\\n\\cline{2-8}\n & Balanced Accuracy & 0.778 & 0.825 & 0.902 & 0.685 & 0.690 & 0.788\\\\\n\\cline{2-8}\n\\multirow{-6}{*}{\\raggedright\\arraybackslash Sequential, Optimal Set} & Kappa & 0.635 & 0.684 & 0.763 & 0.457 & 0.468 & 0.587\\\\\n\\cline{1-8}\n & Accuracy & 0.843 & 0.871 & 0.969 & 0.896 & 0.980 & 0.970\\\\\n\\cline{2-8}\n & Sensitivity & 0.659 & 0.962 & 0.867 & 0.453 & 0.308 & 0.704\\\\\n\\cline{2-8}\n & Specificity & 0.928 & 0.697 & 0.982 & 0.983 & 0.994 & 0.982\\\\\n\\cline{2-8}\n & F1-Score & 0.682 & 0.907 & 0.867 & 0.589 & 0.381 & 0.667\\\\\n\\cline{2-8}\n & Balanced Accuracy & 0.793 & 0.829 & 0.925 & 0.718 & 0.651 & 0.843\\\\\n\\cline{2-8}\n\\multirow{-6}{*}{\\raggedright\\arraybackslash SMOTE-Random Forest, Full Set} & Kappa & 0.677 & 0.697 & 0.849 & 0.535 & 0.371 & 0.651\\\\\n\\cline{1-8}\n & Accuracy & 0.851 & 0.876 & 0.966 & 0.904 & 0.981 & 0.975\\\\\n\\cline{2-8}\n & Sensitivity & 0.695 & 0.957 & 0.853 & 0.500 & 0.385 & 0.778\\\\\n\\cline{2-8}\n & Specificity & 0.932 & 0.719 & 0.981 & 0.983 & 0.994 & 0.984\\\\\n\\cline{2-8}\n & F1-Score & 0.715 & 0.910 & 0.853 & 0.631 & 0.455 & 0.724\\\\\n\\cline{2-8}\n & Balanced Accuracy & 0.813 & 0.838 & 0.917 & 0.742 & 0.689 & 0.881\\\\\n\\cline{2-8}\n\\multirow{-6}{*}{\\raggedright\\arraybackslash SMOTE-Random Forest, Optimal Set} & Kappa & 0.697 & 0.710 & 0.834 & 0.580 & 0.445 & 0.711\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Confusion Matrices for Confirmation Set Models](results_files/figure-pdf/fig-conf-conf-mat-1.pdf){#fig-conf-conf-mat width=100%}\n:::\n:::\n\n\n\n\n\n\n::: {#conf-roc-curves .panel-tabset .nav-pills}\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n#### Sequential, Full\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![ROC Curves for Sequential Full Model in Confirmation Set](results_files/figure-pdf/fig-roc-curve-seq-full-1.pdf){#fig-roc-curve-seq-full width=100%}\n:::\n:::\n\n\n\n\n\n\n#### Sequential, Optimal\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![ROC Curves for Sequential, Optimal Model in Confirmation Set](results_files/figure-pdf/fig-roc-curve-seq-opt-1.pdf){#fig-roc-curve-seq-opt width=100%}\n:::\n:::\n\n\n\n\n\n\n#### SMOTE-Random Forest, Full\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![ROC Curves for SMOTE-Random Forest, Full Set Model in Confirmation Set](results_files/figure-pdf/fig-roc-curve-smote-rf-full-1.pdf){#fig-roc-curve-smote-rf-full width=100%}\n:::\n:::\n\n\n\n\n\n\n#### SMOTE-Random Forest, Optimal\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![ROC Curves for SMOTE-Random Forest, Optimal Set Model in Confirmation Set](results_files/figure-pdf/fig-roc-curve-smote-rf-opt-1.pdf){#fig-roc-curve-smote-rf-opt width=100%}\n:::\n:::\n\n\n\n\n\n:::\n\n### Validation Set\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {#tbl-val-eval .cell tbl-cap='Evaluation Metrics on Validation Set Model, SMOTE-Random Forest, Optimal Set'}\n::: {.cell-output-display}\n\\begin{table}[H]\n\\centering\n\\begin{tabular}[t]{l|r|r|r|r|r|r}\n\\hline\n\\multicolumn{2}{c|}{ } & \\multicolumn{5}{c}{Histotypes} \\\\\n\\cline{3-7}\nMetric & Overall & HGSC & CCOC & ENOC & LGSC & MUC\\\\\n\\hline\nAccuracy & 0.890 & 0.907 & 0.971 & 0.952 & 0.972 & 0.979\\\\\n\\cline{1-7}\nSensitivity & 0.774 & 0.926 & 0.937 & 0.714 & 0.444 & 0.846\\\\\n\\cline{1-7}\nSpecificity & 0.955 & 0.851 & 0.974 & 0.984 & 0.983 & 0.983\\\\\n\\cline{1-7}\nF1-Score & 0.731 & 0.937 & 0.851 & 0.777 & 0.390 & 0.698\\\\\n\\cline{1-7}\nBalanced Accuracy & 0.864 & 0.889 & 0.955 & 0.849 & 0.714 & 0.914\\\\\n\\cline{1-7}\nKappa & 0.748 & 0.761 & 0.835 & 0.750 & 0.376 & 0.688\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Confusion Matrix for Validation Set Model](results_files/figure-pdf/fig-val-conf-mat-1.pdf){#fig-val-conf-mat}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![ROC Curves for SMOTE-Random Forest, Optimal Set Model in Validation Set](results_files/figure-pdf/fig-val-roc-curve-smote-rf-opt-1.pdf){#fig-val-roc-curve-smote-rf-opt width=100%}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Subtype Prediction Summary among Predicted HGSC Samples](results_files/figure-pdf/fig-val-pred-protype-1.pdf){#fig-val-pred-protype width=100%}\n:::\n:::\n",
    "supporting": [
      "results_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{\"knit_meta_id\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"booktabs\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"pdflscape\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"tabu\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"threeparttable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"threeparttablex\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"ulem\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"normalem\"]},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"makecell\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"xcolor\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]}]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}