# OV_Histotypes

Classification of Ovarian Cancer Histotypes

## Generate RSF

The Report of Statistical Findings (RSF) can be generated by following the steps below:

1. Clone the repo to your local machine and open RStudio
2. Two local packages `otta` and `ottaOvca` need to be installed locally. They are located on the I drive (`\\files.ubc.ca\team\gpec\i`) at `I:/data repo`. Copy the packages and put them at the path `RENV_PATHS_LOCAL` (found in `.Renviron`). Install using `renv::install()` and use as input the file path to the source package.
3. For the rest of the package dependencies, run `renv::restore()` to restore all packages used in this project into a private library on your local machine.
4. Restart the RStudio session and the Build tab should now have a Build Book button. Click that button to generate GitBook (HTML) and PDF formats of the RSF, or use the dropdown menu to generate a specific format only.
5. The updated report files are generated in `docs/`. Push these files to the GitHub remote. Note that the files need to be pushed to the master branch to update the report.
6. RSF is generated at URL https://talhouklab.github.io/OV_Histotypes/

## Classifier Pipeline

The classifier pipeline can be run by following the steps below:

1. Clone the repo to a GSC server. One of the gphosts is a stable server to use as it runs the relatively newer CentOS 7 operating system (`gphost01`, ..., `gphost04`).
2. Follow Steps 2 and 3 of [Generate RSF] to install R package dependencies. You'll need to use sftp/scp/rsync to transfer the local packages to the server.
3. SSH to the `numbers` server to submit SLURM jobs. This is the job management system that allows us to fire away a large number of scripts to worker nodes.
4. Open a new `tmux` session to run the pipeline in so that the SSH session doesn't timeout if it is running for a long time.
5. Navigate to `pipeline/` and run `make all`
6. The outputs will be in output directory specified in `pipeline/assets/params.sh`. You can also modify parameters in this script as necessary to change the pipeline.
